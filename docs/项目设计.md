# Flog 项目设计

一个简洁的博客系统，使用 FastAPI 和 Vue.js 构建，博客文档完全基于文件系统存储。

## 核心理念

- **文件驱动**：所有博客内容基于文件系统存储，便于版本控制和迁移
- **简洁高效**：轻量级架构，快速响应
- **易于部署**：基于 docker 部署，仅需挂载 data 目录

## 功能特性

### 文章管理

- **文件存储**：所有文章存储在 `data/posts/` 目录下
- **分类管理**：文件夹即分类，如 `tech/`、`life/`
- **自动同步**：系统自动扫描文件目录并同步到数据库
- **内容更新**：基于文件哈希检测变更，自动更新

### 页面管理

- **独立页面**：存储在 `data/pages/` 目录下
- **首页定制**：支持自定义首页内容 - `index.md`
- **关于页面**：独立的关于页面 - `about.md`
- **小记页面**：独立小记页面，目录下的最新一年文档内容拼接到小记页面 - `notes/...`

### 评论系统

- **必填信息**：评论者名称（必填）
- **可选信息**：邮箱、个人链接（可选）
- **回复功能**：支持评论回复，形成讨论串
- **管理机制**：后台可管理评论，支持隐藏/显示/删除评论

### 后台管理

- **阅读统计**：查看文章阅读量
- **评论统计**：查看评论数量和状态
- **文章管理**：隐藏/删除文章
- **评论管理**：隐藏/显示/删除评论
- **数据同步**：手动触发文件系统同步
- **系统配置**：修改系统配置，如网站名称、描述、页尾

### 前端界面

- **首页**
- **关于**
- **小记**
- **存档**：支持按分类、创建时间、更新时间筛选排序
- **管理**

## 数据存储

### 文件系统结构

```
data/
├── assets/          # 附件(图片、视频等)
│   ├── favicon.ico  # 网站图标
│   └── logo.png     # 网站 logo
├── posts/           # 博客文章
│   ├── tech/        # 技术分类
│   └── life/        # 生活分类
├── pages/           # 静态页面
│   ├── index.md     # 首页
│   ├── about.md     # 关于
│   └── notes/       # 小记
│       └── notes-1.md
└── data.db          # SQLite 数据库
```

### 数据库存储

- **articles 表**：存储文章数据（标题、分类、创建时间、更新时间、文件路径、访问量、文件哈希）
- **comments 表**：评论数据（内容、作者、创建时间、状态、文档标题、回复评论 ID）
- **platform 表**：平台配置数据（title、description、footer）
